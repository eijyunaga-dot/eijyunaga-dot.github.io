<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Stamper</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <!-- Screens -->

        <!-- 1. Home Screen -->
        <section id="homeScreen" class="screen active">
            <div class="home-content">
                <h1 class="app-title">Photo Stamper</h1>
                <p class="app-subtitle">写真にスタンプを追加</p>
                <div class="home-actions">
                    <button id="startBtn" class="btn primary large">📸 はじめる</button>
                    <button id="settingsBtn" class="btn outline large">⚙️ 設定</button>
                </div>
            </div>
        </section>

        <!-- 2. Settings Screen -->
        <section id="settingsScreen" class="screen">
            <header class="screen-header">
                <button class="back-btn" data-target="homeScreen">← 戻る</button>
                <h2>設定</h2>
            </header>
            <div class="settings-form">
                <div class="control-group">
                    <label>スタンプ定型文の管理</label>
                    <div class="preset-manager">
                        <div class="add-preset-row">
                            <input type="text" id="newPresetInput" placeholder="新しい定型文...">
                            <button id="addPresetBtn" class="btn small primary">追加</button>
                        </div>
                        <ul id="settingsPresetList" class="settings-preset-list">
                            <!-- Generated by JS -->
                        </ul>
                    </div>
                </div>
                <button id="resetPresetsBtn" class="btn outline danger">初期設定に戻す</button>
                <p id="settingsStatus" class="status-msg"></p>
            </div>
        </section>

        <!-- 3. Editor Screen -->
        <section id="editorScreen" class="screen">
            <header class="screen-header">
                <button class="back-btn" data-target="homeScreen">← ホームへ</button>
                <h2>編集</h2>
            </header>

            <div class="workspace">
                <div class="canvas-container" id="canvasContainer">
                    <div class="upload-placeholder" id="uploadPlaceholder">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                            <circle cx="8.5" cy="8.5" r="1.5" />
                            <polyline points="21 15 16 10 5 21" />
                        </svg>
                        <p>画像をタップまたはドラッグしてアップロード</p>
                        <input type="file" id="imageInput" accept="image/*" hidden>
                    </div>
                    <canvas id="editorCanvas"></canvas>
                </div>

                <aside class="controls">
                    <!-- Input Mode Switch -->
                    <div class="input-mode-switch">
                        <button class="mode-btn active" data-mode="preset">定型文</button>
                        <button class="mode-btn" data-mode="custom">自由入力</button>
                    </div>

                    <!-- Stamp Management -->
                    <div class="stamp-management control-group">
                        <div class="stamp-actions">
                            <button id="addStampBtn" class="btn small primary outline">+ スタンプ追加</button>
                            <button id="deleteStampBtn" class="btn small danger outline" style="display: none;">🗑️
                                削除</button>
                        </div>
                        <p class="help-text small" style="margin-top: 4px; text-align: center;">スタンプをタップして選択</p>
                    </div>

                    <!-- Preset Input -->
                    <div id="presetControls" class="control-group">
                        <label>スタンプを選択</label>
                        <div class="preset-grid" id="presetGrid">
                            <!-- Generated by JS -->
                        </div>
                    </div>

                    <!-- Custom Input -->
                    <div id="customControls" class="control-group" style="display: none;">
                        <label for="textInput">テキスト入力</label>
                        <input type="text" id="textInput" placeholder="ここに入力..." value="Sample Text">
                    </div>

                    <div class="control-group">
                        <label>フォントサイズ</label>
                        <input type="range" id="fontSizeInput" min="10" max="200" value="50">
                    </div>

                    <div class="control-group">
                        <label>透明度</label>
                        <input type="range" id="opacityInput" min="0" max="1" step="0.1" value="0.8">
                    </div>

                    <div class="control-group">
                        <label>文字色</label>
                        <div class="color-picker-wrapper">
                            <input type="color" id="colorInput" value="#ffffff">
                            <span id="colorValue">#FFFFFF</span>
                        </div>
                    </div>

                    <div class="actions vertical">
                        <button id="saveLocalBtn" class="btn primary" disabled>
                            <span>💾</span> 本体に保存
                        </button>
                        <button id="resetBtn" class="btn outline" disabled>リセット</button>
                    </div>
                </aside>
            </div>
        </section>
    </div>
    <script src="script.js"></script>
</body>

</html>
